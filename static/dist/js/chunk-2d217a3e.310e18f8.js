(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217a3e"],{c81d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CCardBody",[a("CDataTable",{attrs:{items:e.items,fields:e.fields,"items-per-page":e.perPage,"column-filter":"",hover:"",sorter:e.sorter},on:{"page-change":e.onPageChange,"update:sorter-value":e.onSorterValue,"update:column-filter-value":e.onColumnFilterValue},scopedSlots:e._u([{key:"over-table",fn:function(){return[a("CButton",{staticClass:"btn btn-primary",on:{click:e.showModal}},[e._v("新增")])]},proxy:!0},{key:"status",fn:function(t){var n=t.item;return[a("td",[a("CBadge",{attrs:{color:e.getBadge(n.status)}},[e._v(" "+e._s(n.status)+" ")])],1)]}},{key:"action",fn:function(t){var n=t.item,o=t.index;return[a("td",{staticClass:"py-2"},[a("CButton",{attrs:{color:"primary",variant:"outline",square:"",size:"sm"},on:{click:function(t){return e.editTypeCode(n,o)}}},[e._v(" 编辑 ")]),a("CButton",{attrs:{color:"primary",variant:"outline",square:"",size:"sm"},on:{click:function(t){return e.deleteTypeCode(n,o)}}},[e._v(" 删除 ")])],1)]}},{key:"under-table",fn:function(){return[a("CPagination",{directives:[{name:"show",rawName:"v-show",value:e.pages>1,expression:"pages>1"}],attrs:{activePage:e.activePage,pages:e.pages},on:{"update:activePage":function(t){e.activePage=t},"update:active-page":function(t){e.activePage=t},"my-page-change":e.onPageChange}})]},proxy:!0}])})],1),a("CModal",{attrs:{title:"编辑/新增 错误类型",color:"primary",show:e.openModal},on:{"update:show":function(t){e.openModal=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.hideModal}},[e._v(" Cancel ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.saveTypeCode}},[e._v(" OK ")])]},proxy:!0}])},[[a("div",[a("CRow",[a("CCol",{attrs:{sm:"12"}},[a("CInput",{attrs:{label:"标题",placeholder:"建议见名知意",value:e.model.title},on:{"update:value":function(t){return e.$set(e.model,"title",t)}}})],1)],1),a("CRow",[a("CCol",{attrs:{sm:"12"}},[a("CInput",{attrs:{label:"常量符号",placeholder:"建议大写",value:e.model.name},on:{"update:value":function(t){return e.$set(e.model,"name",t)}}})],1)],1),a("CRow",[a("CCol",{attrs:{sm:"12"}},[a("CInput",{attrs:{label:"编号",placeholder:"不能重复",value:e.model.code},on:{"update:value":function(t){return e.$set(e.model,"code",t)}}})],1)],1),a("CRow",[a("CCol",{attrs:{sm:"12"}},[a("CTextarea",{attrs:{label:"说明",placeholder:"错误类型说明",value:e.model.description},on:{"update:value":function(t){return e.$set(e.model,"description",t)}}})],1)],1)],1)]],2),a("CElementCover",{directives:[{name:"show",rawName:"v-show",value:e.ajaxDoing,expression:"ajaxDoing"}],attrs:{boundaries:[{sides:["top","left"]}],opacity:.8}},[a("h1",{staticClass:"d-inline"},[e._v("Loading... ")]),a("CSpinner",{attrs:{size:"5xl",color:"success"}})],1)],1)},o=[],i=a("bc3a"),r=a.n(i);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=[{key:"id",label:"ID",filter:!1},{key:"title",label:"标题",sorter:!1},{key:"code",label:"数字代码"},{key:"name",label:"常量表达式",sorter:!1},{key:"description",label:"说明",sorter:!1},{key:"status",label:"状态"},{key:"action",label:"操作",sorter:!1,filter:!1}],c=function(e){return"".concat(host).concat(e)},u={name:"CodeList",data:function(){var e;return e={sorter:{external:!0,resetable:!0},activePage:1,pages:1,perPage:5,sorterMap:{},filterMap:{},ajaxDoing:!1,openModal:!1,items:[],typeSelectOptionMap:{}},s(e,"typeSelectOptionMap",{}),s(e,"model",{id:0,name:"",title:"",code:"",description:"",status:"",createTime:"",updateTime:""}),s(e,"fields",l),s(e,"details",[]),s(e,"collapseDuration",0),e},watch:{activePage:function(e){this.onPageChange(e)}},computed:{},mounted:function(){this.getList()},methods:{hideModal:function(e){this.openModal=!1},showModal:function(){this.openModal=!0},queryString:function(e){var t={},a={size:this.perPage,page:this.activePage},n=this.sorterMap,o={},i=[];return Object.keys(n).forEach((function(e){var t=n[e];t&&i.push(e+" "+t)})),i.length>0&&(o["order"]=i.join(",")),Object.assign(t,this.filterMap,o,a,e),Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},onPageChange:function(e){this.activePage=e,this.getList()},onSorterValue:function(e){var t=e.column,a=e.asc;if(t){var n=!0===a?"asc":!1===a?"desc":null;n?this.sorterMap[t]=n:delete this.sorterMap[t]}this.getList()},onColumnFilterValue:function(e){var t=this;Object.keys(e).forEach((function(a){t.filterMap[a]=e[a]})),this.getList()},getList:function(){var e=this,t=this.queryString();this.ajaxDoing=!0,r.a.get("".concat(host,"/api/v1/type/list?").concat(t)).then((function(t){var a=t.data,n=a.items,o=a.pagination,i=o.size,r=o.page,s=o.total;e.items=n,e.perPage=i,e.activePage=r,e.pages=Math.ceil(s/i),e.ajaxDoing=!1}))},saveTypeCode:function(){var e=this;this.ajaxDoing=!0;var t=this.model,a=t.id?c("/api/v1/type/update"):c("/api/v1/type/create"),n=t.id?"put":"post";return console.log("create",t),r.a[n](a,t).then((function(t){e.ajaxDoing=!1,e.hideModal(),location.reload()})),!1},editTypeCode:function(e){var t=this;this.showModal();var a=e.id,n=c("/api/v1/type/get?id=".concat(a));return r.a.get(n).then((function(e){t.model=e.data,t.ajaxDoing=!1})),!1},deleteTypeCode:function(e){var t=this;this.ajaxDoing=!0;var a=e.id,n=c("/api/v1/type/delete?id=".concat(a));return r.a.delete(n).then((function(e){t.ajaxDoing=!1,location.reload()})),!1},getBadge:function(e){switch(e){case"ON":return"success";case"OFF":return"warning";default:}}}},d=u,p=a("4023"),g=Object(p["a"])(d,n,o,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d217a3e.310e18f8.js.map